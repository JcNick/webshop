var ModelData={FindDB:function(t,e,n,r,a){if("undefined"==typeof AppDB)return void("function"==typeof a&&a());var o=this.getModel(t),i=new Array;if("string"==typeof r){var f=[];f[0]=r}else var f=r;AppDB.transaction(function(t){t.executeSql("SELECT * FROM "+e+" WHERE "+n,f,function(t,e){for(var n=0;n<e.rows.length;n++){var r=e.rows.item(n);for(var f in r)"false"===r[f]&&(r[f]=!1),"true"===r[f]&&(r[f]=!0);i.push(r)}o.setData(i),"function"==typeof a&&a()},null)},function(t){"0"!==t.code&&a()})},_Compare:function(t,e,n){var r=!1;switch(n){case"Contains":r=-1!=t.indexOf(e);break;case"NE":r=t!=e;break;case"GT":r=t>e;break;case"GE":r=t>=e;break;case"LT":r=e>t;break;case"LE":r=e>=t;break;case"BT":$.isArray(e)&&2==e.length&&(r=t>=e[0]&&t<=e[1]);break;case"StartsWith":r=e.toString().length<=t.toString().length&&e.toString()==t.toString().substr(0,e.toString().length);break;case"EndsWith":r=e.toString().length<=t.toString().length&&e.toString()==t.toString().substr(t.toString().length-e.toString().length,e.toString().length);break;default:r=t==e}return r},_CompareObjWithArray:function(t,e,n,r){var a=!0;return e.forEach(function(e,o,i){a=a&&ModelData._Compare(t[e],n[o],r[o])}),a},_CompareObjWithObj:function(t,e,n,r){var a=!0;return e.forEach(function(e,o,i){a=a&&ModelData._Compare(t[e],n[e],r[o])}),a},Find:function(t,e,n,r,a){var o=this.getModel(t),i=o.oData,f=[];if(!$.isArray(i)||0==i.length)return f;if($.isArray(e)||(e=void 0===e?[]:[e]),$.isArray(n)||(n=void 0===n?[]:[n]),"undefined"==typeof r&&(r="EQ"),!$.isArray(r)){var h=r;r=[],e.forEach(function(t,e,n){r.push(h)})}return e.length!=n.length||e.length!=r.length?f:(f=0===e.length?i:i.filter(function(t){return ModelData._CompareObjWithArray(t,e,n,r)}),"function"==typeof a&&a(),f)},Delete:function(t,e,n,r){var a=this.getModel(t),o=a.oData;if($.isArray(o)&&0!=o.length){if($.isArray(e)||(e=void 0===e?[]:[e]),$.isArray(n)||(n=void 0===n?[]:[n]),"undefined"==typeof r&&(r="EQ"),!$.isArray(r)){var i=r;r=[],e.forEach(function(t,e,n){r.push(i)})}if(e.length==n.length&&e.length==r.length){if(0===e.length)o=[];else for(var f=o.length;f--;)ModelData._CompareObjWithArray(o[f],e,n,r)&&o.splice(f,1);a.setData(o)}}},UpdateField:function(t,e,n,r,a,o){var i=this.getModel(t),f=i.oData;if("undefined"!=typeof r){if($.isArray(e)||(e=void 0===e?[]:[e]),$.isArray(n)||(n=void 0===n?[]:[n]),$.isArray(r)||(r=void 0===r?[]:[r]),$.isArray(a)||(a=void 0===a?[]:[a]),"undefined"==typeof o&&(o="EQ"),!$.isArray(o)){var h=o;o=[],e.forEach(function(t,e,n){o.push(h)})}if(e.length==n.length&&e.length==o.length&&r.length==a.length){for(var l=f.length;l--;)ModelData._CompareObjWithArray(f[l],e,n,o)&&r.forEach(function(t,e,n){f[l][t]=a[e]});i.setData(f)}}},Add:function(t,e){var n=this.getModel(t),r=[];"undefined"!=typeof n.oData&&n.oData.length&&(r=n.oData),r.push(e),n.setData(r)},AddArray:function(t,e){var n=this.getModel(t),r=[];"undefined"!=typeof n.oData&&n.oData.length&&(r=n.oData),$.each(e,function(t,e){r.push(e)}),n.setData(r)},Update:function(t,e,n,r,a){var o=this.getModel(t),i=o.oData,f=!1;if("undefined"==typeof i)var i=new Array;if($.isArray(e)||(e=void 0===e?[]:[e]),$.isArray(n)||(n=void 0===n?[]:[n]),"undefined"==typeof a&&(a="EQ"),!$.isArray(a)){var h=a;a=[],e.forEach(function(t,e,n){a.push(h)})}if(e.length==n.length&&e.length==a.length){if(e.length>0)for(var l=i.length;l--;)ModelData._CompareObjWithArray(i[l],e,n,a)&&(i[l]=r,f=!0);1==f?o.setData(i):ModelData.Add(t,r)}},UpdateArray:function(t,e,n,r){var a=this.getModel(t),o=a.oData,i=!1;if("undefined"==typeof o.length)var o=new Array;if($.isArray(e)||(e=void 0===e?[]:[e]),"undefined"==typeof r&&(r="EQ"),!$.isArray(r)){var f=r;r=[],e.forEach(function(t,e,n){r.push(f)})}e.length==r.length&&($.each(n,function(t,n){if(i=!1,e.length>0)for(t=0;t<o.length;t++)ModelData._CompareObjWithObj(o[t],e,n,r)&&(o[t]=n,i=!0);i===!1&&o.push(n)}),a.setData(o))},getModel:function(t){var e=t.getModel();if("undefined"==typeof e)for(var n in t.oModels)var e=t.getModel(n);return e},genID:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return e}};